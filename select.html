<!DOCTYPE html>
<html>

<head>
    <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:300,400" rel="stylesheet">
    <link href="https://cdn.rawgit.com/michalsnik/aos/2.1.1/dist/aos.css" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="./style/main.css">
</head>

<body>
    <div class="container">
        <p class="welcome">Make it possible with me.</p>
        <b href="#" class="scrl"><span></span>Scroll</b>
    </div>
    <div id="barba-wrapper" aria-live="polite">
        <div class="barba-container">
            <div class="select">
                <script src="https://cdn.rawgit.com/michalsnik/aos/2.1.1/dist/aos.js"></script>
                <script>
                    AOS.init();
                </script>
                <p class="hannnari" data-aos="fade-up">Select Tests</p>
            </div>
        </div>
        <!-- / .barba-container -->
    </div>
    <!-- / #barba-wrapper -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/barba.js/1.0.0/barba.min.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            var lastElementClicked;
            var PrevLink = document.querySelector('a.prev');
            var NextLink = document.querySelector('a.next');

            Barba.Pjax.init();
            Barba.Prefetch.init();

            Barba.Dispatcher.on('linkClicked', function(el) {
                lastElementClicked = el;
            });

            var MovePage = Barba.BaseTransition.extend({
                start: function() {
                    this.originalThumb = lastElementClicked;

                    Promise
                        .all([this.newContainerLoading, this.scrollTop()])
                        .then(this.movePages.bind(this));
                },

                scrollTop: function() {
                    var deferred = Barba.Utils.deferred();
                    var obj = {
                        y: window.pageYOffset
                    };

                    TweenLite.to(obj, 0.4, {
                        y: 0,
                        onUpdate: function() {
                            if (obj.y === 0) {
                                deferred.resolve();
                            }

                            window.scroll(0, obj.y);
                        },
                        onComplete: function() {
                            deferred.resolve();
                        }
                    });

                    return deferred.promise;
                },

                movePages: function() {
                    var _this = this;
                    var goingForward = true;
                    this.updateLinks();

                    if (this.getNewPageFile() === this.oldContainer.dataset.prev) {
                        goingForward = false;
                    }

                    TweenLite.set(this.newContainer, {
                        visibility: 'visible',
                        xPercent: goingForward ? 100 : -100,
                        position: 'fixed',
                        left: 0,
                        top: 0,
                        right: 0
                    });

                    TweenLite.to(this.oldContainer, 0.6, {
                        xPercent: goingForward ? -100 : 100
                    });
                    TweenLite.to(this.newContainer, 0.6, {
                        xPercent: 0,
                        onComplete: function() {
                            TweenLite.set(_this.newContainer, {
                                clearProps: 'all'
                            });
                            _this.done();
                        }
                    });
                },

                updateLinks: function() {
                    PrevLink.href = this.newContainer.dataset.prev;
                    NextLink.href = this.newContainer.dataset.next;
                },

                getNewPageFile: function() {
                    return Barba.HistoryManager.currentStatus().url.split('/').pop();
                }
            });

            Barba.Pjax.getTransition = function() {
                return MovePage;
            };
        });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.18.1/TweenMax.min.js"></script>
</body>

</html>